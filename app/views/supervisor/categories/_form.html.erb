<%= form_with(model: @category, url: form_url, local: true) do |f| %>
  <%= render "shared/error_messages", object: f.object %>

  <div class="form-group">
    <div class="row">
      <div class="col-sm-3">
        <%= f.label :name, t(".category_name"), class: "control-label" %>
      </div>
      <div class="col-sm-9">
        <%= f.text_field :name, class: "form-control" %>
      </div>
    </div>
  </div>

  <div class="form-group">
    <div class="row">
      <div class="col-sm-3">
        <label class="control-label"><%= t(".subject_list") %></label>
      </div>
      <div class="col-sm-9" id="subject-list-container">
        <% subject_categories = @subject_categories || @category.subject_categories %>
        <% subject_categories.each do |sc| %>
          <%= f.fields_for :subject_categories, sc do |subject_form| %>
            <%= render "shared/subject_row_fields", f: subject_form %>
          <% end %>
        <% end %>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-9">
        <button type="button" class="btn btn-default btn-sm" id="add-subject-row">+</button>
      </div>
    </div>
  </div>

  <div class="col-sm-offset-10 col-sm-2 form-group text-right flex-container">
    <%= link_to t(".cancel"),
      @category.persisted? ? supervisor_category_path(@category) : supervisor_categories_path,
      class: "btn btn-danger" %>
    <%= f.submit submit_label, class: "btn btn-warning width-fit" %>
  </div>
<% end %>

<%= javascript_tag "initSubjectForm()" %>
